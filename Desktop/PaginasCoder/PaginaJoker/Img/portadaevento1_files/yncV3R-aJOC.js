if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("LSGetViewerFBID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[];return b.seq([function(a){return b.seq([function(a){return b.db.table(4).fetch([[[[0,1]]]]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[0]=[-1,4294967295]:(b=a.item,c[0]=b.facebookUserId)})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSIssueNewTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.db.table(2).add({taskId:void 0,queueName:a[0],context:b.i64.to_string(a[1]),taskValue:a[2],enqueueTimestampMs:b.i64.of_float(Date.now()),httpUrlOverride:a[3],timeoutTimestampMs:a[4],pluginType:a[5],priority:a[6],syncGroupId:a[7],minTimeToSyncTimestampMs:a[9]})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSIssueMessagesRangeQuery",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.islc(c.ftr(c.db.table(13).fetchDesc([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&(c.i64.eq(b.minTimestampMs,f)||c.i64.le(b.minTimestampMs,a[1]))}),0,c.i64.to_float([0,1])).next().then(function(e,g){var h=e.done;e=e.value;return h?0:(g=e.item,d[3]=g.threadKey,d[4]=[0,0],d[1]=g.minTimestampMs,d[2]=g.minMessageId,c.i64.eq(a[2],[0,0])?d[0]=g.hasMoreBefore&&!g.isLoadingBefore:d[0]=g.hasMoreAfter&&!g.isLoadingAfter,d[0]?c.seq([function(b){return c.i64.eq(a[2],[0,0])?c.seq([function(a){return c.fe(c.ftr(c.db.table(13).fetch(),function(a){return c.i64.eq(a.threadKey,d[3])&&c.i64.eq([0,0],d[4])&&c.i64.eq(a.minTimestampMs,d[1])&&a.minMessageId===d[2]}),function(a){var b=a.update;a.item;return b({isLoadingBefore:!0})})},function(a){return a=[d[1],d[2]],d[5]=a[0],d[6]=a[1],a}]):c.seq([function(a){return c.fe(c.ftr(c.db.table(13).fetch(),function(a){return c.i64.eq(a.threadKey,d[3])&&c.i64.eq([0,0],d[4])&&c.i64.eq(a.minTimestampMs,d[1])&&a.minMessageId===d[2]}),function(a){var b=a.update;a.item;return b({isLoadingAfter:!0})})},function(a){return a=[g.maxTimestampMs,g.maxMessageId],d[5]=a[0],d[6]=a[1],a}])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[7]=[0,1]:(e=b.item,d[13]=e.syncGroup,c.i64.neq(d[13],f)?d[12]=d[13]:d[12]=[0,1],d[7]=d[12])})},function(e){return d[9]=new c.Map(),d[9].set("thread_key",a[0]),d[9].set("direction",a[2]),d[9].set("reference_timestamp_ms",d[5]),d[9].set("reference_message_id",d[6]),d[9].set("sync_group",d[7]),d[10]=d[9].get("thread_key"),d[9],d[11]=c.toJSON(d[9]),c.sp(b("LSIssueNewTask"),"mrq.{}".split("{}").join(c.i64.to_string(d[10])),[0,228],d[11],f,f,[0,0],[0,0],f,f,[0,0])}]):c.resolve())})},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSVerifyThreadExists",["LSGetViewerFBID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return[[0,7],[0,8],[0,13],[0,10],[0,11],[0,16]].some(function(b){return c.i64.eq(a[1],b)})?c.resolve((b=[!1,!1,!1],d[0]=b[0],d[1]=b[1],d[2]=b[2],b)):c.seq([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?(f=[!0,!0,!1],d[3]=f[0],d[4]=f[1],d[5]=f[2],f):(e=b.item,d[10]=e.authorityLevel,e.folderName==="other"?(f=[!0,!1,!1],d[7]=f[0],d[8]=f[1],d[9]=f[2],f):(c.i64.ge(d[10],a[4])||c.i64.eq(d[10],[0,20])&&(c.i64.eq(a[1],[0,2])||[[0,23],[0,21],[0,18]].some(function(b){return c.i64.eq(a[1],b)}))?(b=[!1,!1,!1],d[11]=b[0],d[12]=b[1],d[13]=b[2],b):(e=[!0,!1,!0],d[11]=e[0],d[12]=e[1],d[13]=e[2],e),f=[d[11],d[12],d[13]],d[7]=f[0],d[8]=f[1],d[9]=f[2],f),b=[d[7],d[8],d[9]],d[3]=b[0],d[4]=b[1],d[5]=b[2],b)})},function(a){return a=[d[3],d[4],d[5]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(e){return d[0]?(d[3]=new c.Map(),d[3].set("thread_fbid",a[0]),d[3].set("force_upsert",!1),d[3].set("use_open_messenger_transport",!1),d[3].set("sync_group",[0,1]),d[3].set("metadata_only",!1),d[4]=d[3].get("thread_fbid"),d[3],d[5]=c.toJSON(d[3]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[4]),[0,209],d[5],f,f,[0,0],[0,0],f,f,[0,0])):c.resolve()},function(e){return d[1]?c.seq([function(b){return d[3]=[64,1083495711],d[4]=[0,0],c.fe(c.ftr(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[0],mailboxType:[0,0],threadType:a[1],folderName:a[2],lastReadWatermarkTimestampMs:[0,0],removeWatermarkTimestampMs:[-1,4294967295],ongoingCallState:[0,0],parentThreadKey:a[3],authorityLevel:a[4],capabilities:d[3],capabilities2:d[4],unsendLimitMs:[-1,4294967295]})},function(e){return c.i64.eq(a[1],[0,1])?c.seq([function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[0],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,a[0])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[0],contactId:a[0],readWatermarkTimestampMs:[0,0],deliveredWatermarkTimestampMs:[0,0],authorityLevel:a[4],isModerator:!1})},function(a){return c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[5]=a[0],a})},function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[0],d[5]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,d[5])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[0],contactId:d[5],readWatermarkTimestampMs:[0,0],deliveredWatermarkTimestampMs:[0,0],authorityLevel:a[4],isModerator:!1})}]):c.resolve()}]):c.resolve()},function(b){return d[2]?c.fe(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({authorityLevel:a[4]})}):c.resolve()}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSVerifyThreadRowExists",["LSVerifyThreadExists"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[];return c.seq([function(d){return c.sp(b("LSVerifyThreadExists"),a[0],a[1]==null?[0,1]:a[1],"inbox",[0,0],[0,40])},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("LSStorage",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e){a=a.tableNames[b];b=a.indexes;a=a.primaryKeyIds;a=e==null?a:b[e];return a.reduceRight(function(a,b){if(d[b]!==void 0||e!=null)return{hd:d[b],tl:a};throw c("unrecoverableViolation")("primary key must be defined on object","messenger_web_product")},0)}function b(a,b){while(a!==0&&b!==0){if(a.hd!==b.hd&&!(Array.isArray(a.hd)&&Array.isArray(b.hd)&&a.hd.length===b.hd.length&&a.hd.every(function(a,c){return a===b.hd[c]})))return!1;a=a.tl;b=b.tl}return a===0&&b===0}g.searchKey=a;g.areKeysEqual=b}),98);
__d("LSTableDefaults.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";c={syncStatus:(a=b("bs_caml_int64")).zero,sendSyncParams:!1,minTimeToSyncTimestampMs:a.zero,canIgnoreTimestamp:!1,lastSyncCompletedTimestampMs:a.zero,syncChannel:a.one};d={enqueueTimestampMs:a.zero,firstExecutedTimestampMs:a.zero,failureCount:a.zero,minTimeToSyncTimestampMs:a.zero,pluginType:a.zero};e={isMessengerUser:!1,isMemorialized:!1,blockedByViewerStatus:a.zero,rank:a.zero,contactType:a.zero,contactTypeExact:a.zero,canViewerMessage:!0,authorityLevel:a.zero,optimisticBlockedByViewerStatus:a.zero,optimisticBlockedByViewerStatusTimestampMs:a.zero,contactReachabilityStatusType:a.zero,waConnectStatus:a.zero,capabilities2:a.zero};b={timestampMs:a.zero,authorityLevel:a.zero};var g={lastActivityTimestampMs:a.zero,lastReadWatermarkTimestampMs:a.zero,removeWatermarkTimestampMs:a.zero,muteExpireTimeMs:a.zero,ongoingCallState:a.zero,snippetHasEmoji:!1,hasPersistentMenu:!1,disableComposerInput:!1,capabilities:a.zero,isCustomThreadPicture:!1,authorityLevel:a.zero,capabilities2:a.zero,muteCallsExpireTimeMs:a.zero,unsendLimitMs:a.zero,threadInvitesEnabled:a.zero,threadInvitesEnabledV2:a.zero},h={minThreadKey:a.zero,minLastActivityTimestampMs:a.zero,maxThreadKey:a.zero,maxLastActivityTimestampMs:a.zero,isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},i={timestampMs:a.zero,primarySortKey:a.zero,secondarySortKey:a.zero,isAdminMessage:!1,sendStatus:a.zero,sendStatusV2:a.zero,isUnsent:!1,replyStatus:a.zero,replyAttachmentType:a.zero,hasQuickReplies:!1,textHasLinks:!1,viewFlags:a.zero,displayedContentTypes:a.one,quickReplyType:a.zero,authorityLevel:a.zero,unsentTimestampMs:a.zero},j={isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},k={readWatermarkTimestampMs:a.zero,deliveredWatermarkTimestampMs:a.zero,authorityLevel:a.zero,readActionTimestampMs:a.zero,groupParticipantJoinState:a.zero},l={timestampMs:a.zero,attachmentType:a.zero,hasMedia:!1,isSharable:!1,hasXma:!1,attachmentIndex:a.zero,authorityLevel:a.zero},m={mediaGroup:a.zero,isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},n={attachmentIndex:a.zero},o={authorityLevel:a.zero},p={timestampMs:a.zero,showAdChoiceIcon:!1},q={ctaType:a.zero},r={timestampMs:a.zero},s={pollType:a.zero},t={minThreadKey:a.zero,minLastActivityTimestampMs:a.zero,maxThreadKey:a.zero,maxLastActivityTimestampMs:a.zero,isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1,folderName:""},u={capabilities:a.zero},v={minThreadKey:a.zero,minLastActivityTimestampMs:a.zero,isLoadingBefore:!1,hasMoreBefore:!1},w={lastAccessedTimestampMs:a.zero},x={authorityLevel:a.zero},y={canAnonymousUsersJoin:a.zero},z={timestampMs:a.zero},A={pageNum:a.zero,readState:a.zero},B={authorityLevel:a.zero},C={interactionType:a.one,authorityLevel:a.zero},D={authorityLevel:a.zero},E={shouldShowAdChoice:!1},F={authorityLevel:a.zero},G={authorityLevel:a.zero,encryptionVersion:a.zero,revisionVersion:a.zero},H={authorityLevel:a.zero},I={authorityLevel:a.zero},J={virtualDeviceType:a.one},K={virtualDeviceType:a.one};a={authorityLevel:a.zero};var L={isMigrated:!1,showOpenMessageHistory:!1};c={sync_groups:c,pending_tasks:d,contacts:e,reactions:b,threads:g,threads_ranges_v2__generated:h,messages:i,messages_ranges_v2__generated:j,participants:k,attachments:l,attachments_ranges_v2__generated:m,attachment_items:n,group_membership_approval_requests:o,admin_message_ctas:p,thread_nullstate:q,messages_status:r,polls:s,filtered_threads_ranges_v2__generated:t,community_folders:u,inbox_threads_ranges:v,universal_search_recent_searches:w,contact_upload_settings:x,video_chat_links_joining:y,transaction_history:z,story_buckets:A,stories:B,story_viewers:C,story_reactions:D,story_ad_unit:E,story_overlays:F,secure_encrypted_backups_client_state:G,secure_encrypted_backups_epochs:H,encrypted_backups:I,secure_encrypted_backups_generated_recovery_code:J,encrypted_backups_virtual_devices:K,encrypted_backups_metadata:a,cutover_threads:L};f.Defaults=c}),null);
__d("ReStorePersistence",["PromiseOrValue","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h={};function i(l,m,n){return(l.has(m)?l:l.set(m,n())).get(m)}function j(l){if(l==null)return l;var m=Object.getOwnPropertyNames(l),j={},n,o;for(n=0;n<m.length;n++)o=l[m[n]],j[m[n]]=Array.isArray(o)?[].concat(o):o;return j}function k(l){return{clearCache:l.clearCache,close:l.close,createTransaction:function(){var m=new Map();return{flush:async function(){await l.flush(m)},table:function(n){function o(s,t){var u=q.get(t);if(u===h)return void 0;return u!==void 0?u:l.get(s,n,t)}function p(s,t){return d("PromiseOrValue").map(o(s,t),function(u){if(u===void 0)throw c("unrecoverableViolation")("Got unexpected undefined","messenger_web_product");return u})}var q=i(m,n,function(){return new Map()});function r(s,t){return{read:function*(u){var v=o(s,u);return v instanceof window.Promise?yield v:v},readExn:function*(u){var v=p(s,u);return v instanceof window.Promise?yield v:v},readHeader:function*(){var u=o(s,t);return u instanceof window.Promise?yield u:u},remove:function*(u){q.set(u,h)},removeHeader:function*(){q.set(t,h)},write:function*(u,v){q.set(u,v)},writeHeader:function*(u){q.set(t,u)},writeNew:function*(u){var v=d("PromiseOrValue").map(o(s,"nextId"),function(v){v===void 0&&(v=0);q.set("nextId",v+1);q.set(v,u);return v});return v instanceof window.Promise?yield v:v}}}return{getBPlusTreeStore:r,incrementSeed:function(s,t){return d("PromiseOrValue").map(o(s,"seed"),function(u){u===void 0&&(u=0);q.set("seed",Math.max(u,t||0)+1);return t===void 0?u:t})},readData:function*(s,t){var u=o(s,t);return u instanceof window.Promise?yield u:u},readDataExn:function*(s,t){var u=p(s,t);return u instanceof window.Promise?yield u:u},readSeed:function(s){return d("PromiseOrValue").map(o(s,"seed"),function(t){t===void 0&&(t=0);return t})},remove:function(s,t){q.set(t,h)},writeData:function(s,t,u){q.set(t,j(u))},writeNewData:function(s,t){return d("PromiseOrValue").map(o(s,"nextId"),function(u){u===void 0&&(u=0);q.set("nextId",u+1);q.set(u,j(t));return u})}}}}},releaseLockIfNeeded:l.releaseLockIfNeeded,waitForLock:l.waitForLock}}g.sentinelDeleted=h;g.createDbStore=k}),98);
__d("ReStoreTransactionLock",["gkx"],(function(a,b,c,d,e,f,g){"use strict";var h={chainPromiseOrValue:function(j){return j(h)}},i=function(){function i(k){this.lock=null,k!=null&&(this.lock=this.$1(k))}var j=i.prototype;j.$1=function(k){var l=this,m=k.then(function(n){l.lock===m&&(l.lock=null);return n}).finally(function(n){l.lock===m&&(l.lock=null)});return m};j.chainPromiseOrValue=function(k){if(!c("gkx")("3174"))return h.chainPromiseOrValue(k);var l=this.lock;if(l==null){var m=k(h);if(m instanceof window.Promise)l=m;else return m}else l=l.then(function(){return k(h)});var n=this.$1(l);this.lock=n;return n};return i}();g.default=i}),98);
__d("ReQLBounds.bs",["LSDbKeyComparer.bs","bs_js_dict","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a,b,c){if(!b)return c;if(a<=0)return c;var d=b.hd;if(a===1)return{hd:d,tl:0};else return{hd:d,tl:g(a-1|0,b.tl,c)}}function a(a,c){return g(a,c,{hd:b("LSDbKeyComparer.bs").maxKey,tl:0})}function c(a,c){a=function(a){var b=a.NAME;if(b==="lessThan")return["lt",a.VAL];else if(b==="greaterThan")return["gt",a.VAL];else if(b==="greaterThanOrEqual")return["gte",a.VAL];else return["lte",a.VAL]};var d=c.NAME;if(d!=="range")if(d==="greaterThanOrEqual"||d==="greaterThan")return b("bs_js_dict").fromArray([a(c)]);else return b("bs_js_dict").fromArray([a(c)]);d=c.VAL;return b("bs_js_dict").fromArray([a(d[0]),a(d[1])])}function d(a){var c=a.operation;switch(c){case"add":return{TAG:0,_0:a.value};case"delete":return 0;case"put":return{TAG:1,_0:a.value};default:return b("unrecoverableViolation")("Unexpected operation","messenger_web_product")}}f.concat=g;f.nextKey=a;f.mapBounds=c;f.mapEventToOperation=d}),null);
__d("IntervalList",["FBLogger","LSDbKeyComparer","ReQLBounds.bs","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a==null)throw c("FBLogger")("messenger_web_product").mustfixThrow("must not be null");return a}function a(a,c){var e=b("regeneratorRuntime").mark(k),f=new Map(),g=new Map(),i=new Map();function j(b,c){return c==null?!0:(c.gt!==void 0?a(b,c.gt)>0:c.gte!==void 0?a(b,c.gte)>=0:!0)&&(c.lt!==void 0?a(b,c.lt)<0:c.lte!==void 0?a(b,c.lte)<=0:!0)}function k(a){var h,i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:h=a,i={hd:d("LSDbKeyComparer").MAX_KEY,tl:0},k=0;case 3:if(!(h!==0&&g.size)){b.next=33;break}k++;l=h;m=h.tl;h.tl=k<c?i:0;b.prev=8;n=g.get(JSON.stringify(a));if(!(n!=null)){b.next=27;break}o=n,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 12:if(!p){b.next=18;break}if(!(q>=o.length)){b.next=15;break}return b.abrupt("break",27);case 15:r=o[q++];b.next=22;break;case 18:q=o.next();if(!q.done){b.next=21;break}return b.abrupt("break",27);case 21:r=q.value;case 22:s=r;b.next=25;return s;case 25:b.next=12;break;case 27:b.prev=27;l.tl=m;return b.finish(27);case 30:h=l.tl;b.next=3;break;case 33:t=f.entries(),u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 34:if(!u){b.next=40;break}if(!(v>=t.length)){b.next=37;break}return b.abrupt("break",52);case 37:w=t[v++];b.next=44;break;case 40:v=t.next();if(!v.done){b.next=43;break}return b.abrupt("break",52);case 43:w=v.value;case 44:x=w;y=x[0];z=x[1];if(!(f.has(y)&&j(a,z))){b.next=50;break}b.next=50;return y;case 50:b.next=34;break;case 52:case"end":return b.stop()}},e,this,[[8,,27,30]])}function l(a){var b=i.get(a);if(b!=null){i["delete"](a);var c=h(g.get(b));c["delete"](a);c.size===0&&g["delete"](b)}else f["delete"](a)}function m(a,b){var e;if(a&&a.gte!=null&&a.lte!=null&&(e=JSON.stringify(d("ReQLBounds.bs").nextKey(c,a.gte)))===JSON.stringify(a.lte)){var h=g.get(e);h==null&&(h=new Set(),g.set(e,h));h.add(b);i.set(b,e)}else f.set(b,a)}return{"delete":l,findIntersecting:k,set:m}}g["default"]=a}),98);
__d("createReStoreSubscriptionManager",["IntervalList","LSDbKeyComparer","LSStorage","Promise","cr:181","killswitch","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var e=new Map(),f=new Map();function g(a,c,d,e){return b("Promise").all(Array.from(a.findIntersecting(d)).map(function(a){return a(d,e,c)}))}function h(b){return c("nullthrows")((e.has(b)?e:e.set(b,[c("IntervalList")(d("LSDbKeyComparer").compareKey,a.tableNames[b].primaryKeyIds.length),new Map()])).get(b))}function i(b,e){var f=h(b);f[0];f=f[1];return c("nullthrows")((f.has(e)?f:f.set(e,c("IntervalList")(d("LSDbKeyComparer").compareKey,a.tableNames[b].indexes[e].length))).get(e))}function j(e,f,h,i,j,k){var l=function(a,b){return g(e,k,a,b)},m=h==null?void 0:d("LSStorage").searchKey(a,f,h,j),n=i==null?void 0:d("LSStorage").searchKey(a,f,i,j);if(n==null&&m!=null)return l(m,{operation:"delete",prevValue:h});if(m==null&&n!=null)return l(n,{operation:"add",value:c("nullthrows")(i)});return m!=null&&n!=null?d("LSDbKeyComparer").compareKey(m,n)===0?l(m,{operation:"put",prevValue:h,value:c("nullthrows")(i)}):l(m,{operation:"delete",prevValue:h}).then(function(){return l(n,{operation:"add",value:c("nullthrows")(i)})}):b("Promise").resolve()}function k(a,d,e,f,g){g===void 0&&(g=!1);!c("killswitch")("MESSENGER_WEB_PERSISTED_DB")&&g&&b("cr:181")!=null&&b("cr:181").postMessage("notifyTable",[a,d,e]);g=h(a);var i=g[0],k=g[1];return j(i,a,d,e,null,f).then(function(){return b("Promise").all(Array.from(k.entries()).map(function(b){var c=b[0];b=b[1];return j(b,a,d,e,c,f)}).filter(function(a){return a!=null}))})}function l(a){a===void 0&&(a=!1),!c("killswitch")("MESSENGER_WEB_PERSISTED_DB")&&a&&b("cr:181")!=null&&b("cr:181").postMessage("notifyCommit"),f.forEach(function(a){return a()})}!c("killswitch")("MESSENGER_WEB_PERSISTED_DB")&&b("cr:181")!=null&&(b("cr:181").onEventReceive("notifyTable",function(a){var b=a[0],d=a[1];a=a[2];var e=new WeakMap();c("promiseDone")(k(b,d,a,e,!1))}),b("cr:181").onEventReceive("notifyCommit",function(a){l(!1)}));return{dispose:function(){e.clear(),f.clear()},notifyCommit:l,notifyTableAndIndexSubscribers:k,subscribeIndex:function(a,c,d,e){var f=i(a,c),g=!1,h=function(a,c,e){return g?b("Promise").resolve():d(a,c,e)};f.set(e,h);return function(){g=!0,f["delete"](h)}},subscribeTable:function(a,c,d){a=h(a);var e=a[0],f=!1,g=function(a,d,e){return f?b("Promise").resolve():c(a,d,e)};e.set(d,g);return function(){f=!0,e["delete"](g)}},subscribeToCommit:function(a){f.set(a,a);return function(){f["delete"](a)}}}}g["default"]=a}),98);
__d("ReStore",["BPlusTreeBase","I64","LSDbKeyComparer","LSStorage","LSTableDefaults.bs","ReStoreIndexMetadata","ReStorePersistence","ReStoreTransactionLock","createReStoreSubscriptionManager","gkx","unrecoverableViolation"],(function(aa,ba,a,b,ca,da,ea){"use strict";var c=function(f){babelHelpers.inheritsLoose(c,f);function c(){return f.call(this,"Transaction has finished")||this}return c}(babelHelpers.wrapNativeSuper(Error));function fa(f){var g=b("I64").cast(f);if(g===void 0)throw a("unrecoverableViolation")("Expected int64","messenger_web_product");return b("I64").to_float(g)}function d(f,g){function h(i){if(i.done)return i.value;if(!(i.value instanceof Promise))throw a("unrecoverableViolation")("expected promise","messenger_web_product");return i.value.then(function(j){return h(f.next(j))})}return h(f.next(g))}function ga(f){return{next:function*(g){var h=f.next(g);while(h.value instanceof window.Promise)h=f.next(yield h.value);return h}}}function ha(f){var g=ga(f);return{next:function(h){return d(g.next(h))}}}function ia(f,g){return{next:function(h){return g.chainPromiseOrValue(function(){return f.next(h)})}}}async function ja(f){var g=[],h=await f.next();while(!h.done)g.push(h.value),h=await f.next();return g}function ka(f,g){var h=a("LSTableDefaults.bs").Defaults[g.name];return!h?f:Object.keys(h).reduce(function(i,j){Object.prototype.hasOwnProperty.call(i,j)||(i[j]=h[j]);return i},babelHelpers.extends({},f))}function la(f,g){var h=babelHelpers.extends({},g),i=function(j){h[j]=function(){for(var k=arguments.length,l=new Array(k),m=0;m<k;m++)l[m]=arguments[m];return f.chainPromiseOrValue(function(){return g[j].apply(g,l)})}};for(var j in g)i(j);h.entries=function(k,l,m,n,o,oa){return ia(g.entries(k,l,m,n,o,oa),f)};return h}function e(f,g,h){return a("BPlusTreeBase")(b("LSDbKeyComparer").compareKey,16,g.getBPlusTreeStore(f,h==null?"root":"index("+h+")"))}function ma(f,g,h){return(f.has(g)?f:f.set(g,h())).get(g)}function na(f,g){var h=b("ReStorePersistence").createDbStore(f),i=a("createReStoreSubscriptionManager")(g),j=ba("LSStorage").searchKey.bind(null,g),k=Promise.resolve(),l=!1,m=new Map();function n(p,q,r){return!q||p<=0?r:{hd:q.hd,tl:p===1?0:n(p-1,q.tl,r)}}function o(p,q){if(p==null)return void 0;var r=babelHelpers.extends({},p);r.gt!=null&&(r.gt=n(q,r.gt,{hd:b("LSDbKeyComparer").MAX_KEY,tl:0}));r.lte!=null&&(r.lte=n(q,r.lte,{hd:b("LSDbKeyComparer").MAX_KEY,tl:0}));return r}function oa(p,q){return function(r){return{add:function(s){return q.add(p,new WeakMap(),r,s)},delete:function(s){return q.delete(p,new WeakMap(),r,s)},deleteThenInsert:function(s){return q.deleteThenInsert(p,new WeakMap(),r,s)},entries:function(s,t,u){t===void 0&&(t="asc");return q.entries(p,s,r,void 0,t,u)},get:function(s,t){t===void 0&&(t=new WeakMap());return q.get(p,t,r,void 0,s)},index:function(s){return{entries:function(t,u,v){u===void 0&&(u="asc");return q.entries(p,t,r,s,u,v)},get:function(t){return q.get(p,new WeakMap(),r,s,t)},getKey:function(t){return q.getKey(p,new WeakMap(),r,s,t)}}},peekNextAutoIncrementId:function(){return q.peekNextAutoIncrementId(p,new WeakMap(),r)},put:function(s){return q.put(p,new WeakMap(),r,s)},upsert:function(s,t){return q.upsert(p,new WeakMap(),r,s,t)}}}}function pa(p){function q(D,E,F,G){var H=JSON.stringify([D,E]),I=p.get(H);p.set(H,[I==null?F:I[0],G])}async function r(D,E,F,G,H){var I=D.table(F),J=e(E,I,G),K=await d(J.getWithDefault(H,void 0));return K===void 0?void 0:d(I.readDataExn(E,K))}async function s(D,E,F,G,H){var I=await r(D,E,F,G,H);return I===void 0?void 0:j(F,I)}function t(D,E,F,G,H,I){return ha(function*(){var J=D.table(F),K=e(E,J,G),L=ga(K.entries(babelHelpers.extends({},o(I,(G===void 0?g.tableNames[F].primaryKeyIds:g.tableNames[F].indexes[G]).length),{dir:H}))),M=(yield* L.next());while(!M.done){var N=M.value,O=N[0],P=N[1];M=(yield* L.next(yield [O,yield* J.readDataExn(E,P)]))}}())}async function u(D,E,F,G,H){function I(S,T){var U=[],V=S;while(V!==0)U.push(V.hd),V=V.tl;return U.length>=T?S:U.reduceRight(function(W,X){return{hd:X,tl:W}},{hd:b("LSDbKeyComparer").MAX_KEY,tl:0})}if(H!=null&&b("LSDbKeyComparer").compareKey(G,H)===0)return;var J=g.tableNames[F],K=J.cascadeUpdates,L=J.primaryKeyIds,M=async function(){if(O){if(P>=N.length)return"break";Q=N[P++]}else{P=N.next();if(P.done)return"break";Q=P.value}var S=Q,T=S.indexName,F=S.tableName,U=g.tableNames[F],V=U.indexes,W=U.primaryKeyIds,X=T==null?W:V[T],xa={gte:G,lte:I(G,X.length)},ya=await ja(t(D,E,F,T,"asc",xa));for(var Y=ya,za=Array.isArray(Y),Z=0,Y=za?Y:Y[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var Aa;if(za){if(Z>=Y.length)break;Aa=Y[Z++]}else{Z=Y.next();if(Z.done)break;Aa=Z.value}var Ba=Aa;Ba[0];var Ca=Ba[1],$=j(F,Ca);if(H===void 0)await y(D,E,F,$),await u(D,E,F,$,void 0);else{var Da=L.reduce(function(Ea,Fa,Ga){var Ha=Ea[0],H=Ea[1];if(!H)return[Ha,H];Ha[X[Ga]]=H.hd;return[Ha,H.tl]},[babelHelpers.extends({},Ca),H])[0];await x(D,E,F,$,Da);await u(D,E,F,$,j(F,Da))}}};for(var N=K,O=Array.isArray(N),P=0,N=O?N:N[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var Q,R=await M();if(R==="break")break}}async function v(D,E,F){var G=g.tableNames[F].autoIncrement;if(!G)throw a("unrecoverableViolation")("only supported for auto-incrementing tables","messenger_web_product");var H=await D.table(F).readSeed(E);if(H===void 0)throw a("unrecoverableViolation")("unexpected undefined autoIncrementSeed","messenger_web_product");return b("I64").of_float(H)}async function w(D,E,F,G){var H=D.table(F),I=e(E,H),J=g.tableNames[F],K=j(F,G),L=z(Object.keys(J.indexes),F,G),M={},N=await d(I.getWithDefault(K,void 0)),O,P=G;if(N!==void 0)O=await d(H.readDataExn(E,N)),M=z(Object.keys(J.indexes),F,O),H.writeData(E,N,G);else{if(J.autoIncrement)throw a("unrecoverableViolation")("Id must not be specified for new record when table has an autoincrementing primary key","messenger_web_product");P=ka(G,J);N=await H.writeNewData(E,P);await d(I.set(K,N))}var Q=Object.keys(L);for(var R=0;R<Q.length;R++){var S=Q[R];M[S]!==void 0&&b("LSDbKeyComparer").compareKey(M[S],L[S])===0&&(delete L[S],delete M[S])}await A(D,E,F,L);await B(D,E,F,N,L);var T=Object.keys(M);for(var U=0;U<T.length;U++){var V=T[U],W=e(E,H,V);await d(W.delete(M[V]))}q(F,K,O,P)}async function x(D,E,F,G,H){var I=j(F,H);b("LSStorage").areKeysEqual(G,I)||await y(D,E,F,G);await w(D,E,F,H)}async function y(D,E,F,G){var H=D.table(F),I=e(E,H),J=g.tableNames[F],K=await d(I.getWithDefault(G,void 0)),L;if(K!==void 0){L=await d(H.readDataExn(E,K));if(Object.keys(J.indexes).length){var M=Object.keys(J.indexes);for(var N=0;N<M.length;N++){var O=M[N],P=j(F,L,O);if(P!=null){var Q=e(E,H,O);await d(Q.delete(P))}}}await d(I.delete(G));H.remove(E,K);q(F,G,L,void 0)}}function z(D,E,F){return D.reduce(function(G,H){var I=j(E,F,H);G[H]=I;return G},{})}async function A(D,E,F,G){var H=D.table(F),I=new Set(),J=Object.keys(G);for(var K=0;K<J.length;K++){var L=J[K],M=e(E,H,L),N=G[L],O=await d(M.getWithDefault(N));if(O!=null&&!I.has(O)){var P=j(F,await d(H.readDataExn(E,O)));await y(D,E,F,P);await u(D,E,F,P,void 0);I.add(O)}}}async function B(D,E,F,G,H){var I=D.table(F),J=Object.keys(H);for(var K=0;K<J.length;K++){var L=J[K],M=e(E,I,L),N=H[L];await d(M.set(N,G))}}async function C(D,E,F,G){var H=D.table(F),I=e(E,H),J=g.tableNames[F];if(J.autoIncrement){var K=G[g.tableNames[F].primaryKeyIds[0]],L=b("I64").of_float(await H.incrementSeed(E,K===void 0?K:fa(K)));G[g.tableNames[F].primaryKeyIds[0]]=L}var M=ka(G,J),N=j(F,M);if(N==null)throw new Error("Evaluating the object store's key path did not yield a value");if(!await d(I.has(N))){var O=z(Object.keys(J.indexes),F,M);await A(D,E,F,O);var P=await H.writeNewData(E,M);await d(I.set(N,P));await B(D,E,F,P,O);q(F,N,void 0,M)}}return{add:C,delete:async function(D,E,F,G){await y(D,E,F,G),await u(D,E,F,G,void 0)},deleteThenInsert:async function(D,E,F,G){await w(D,E,F,G),await u(D,E,F,j(F,G),void 0)},entries:t,get:r,getKey:s,peekNextAutoIncrementId:v,put:w,upsert:async function(D,E,F,G,H){await x(D,E,F,G,H),await u(D,E,F,G,j(F,H))}}}function qa(p,q){var r=new(a("ReStoreTransactionLock"))();return{table:oa(p,la(r,pa(q)))}}function ra(p,q){var r=new Map();return new Promise(function(s,t){k=k.then(h.waitForLock).then(async function(){try{l=!0;var u=h.createTransaction(),v=await p(qa(u,r)),w=new WeakMap();await u.flush();for(var x=r,y=Array.isArray(x),z=0,x=y?x:x[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var A;if(y){if(z>=x.length)break;A=x[z++]}else{z=x.next();if(z.done)break;A=z.value}var B=A,C=B[0],D=B[1],E=D[0],F=D[1],G=JSON.parse(C),H=G[0];G[1];await i.notifyTableAndIndexSubscribers(H,E,F,w,!0)}s(v)}catch(I){t(I)}i.notifyCommit(!0);l=!1}).then(h.releaseLockIfNeeded)})}if(a("gkx")("4547")){var sa=async function(p){var q=p.table(b("ReStoreIndexMetadata").indicesTableName),r={},s=await ja(q.entries(new WeakMap(),"asc",void 0));for(var t=s,u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var w;if(u){if(v>=t.length)break;w=t[v++]}else{v=t.next();if(v.done)break;w=v.value}var x=w,y=x[0],z=x[1];if(y!=null){var A,B=b("ReStoreIndexMetadata").tryParseIndexData(z);if(B==null)continue;var C=B.indexName,D=B.tableName;r[D]=(A=r[D])!=null?A:{};r[D][C]={index:B.data,key:y}}}return r},ta=async function(p,q){var r=await sa(p),s={};for(var t in q.tableNames){var u=q.tableNames[t];for(var v in u.indexes){var w,x=u.indexes[v],y=(w=r[t])==null?void 0:w[v];if(b("ReStoreIndexMetadata").indicesDiffer(y==null?void 0:y.index,x)){var z;s[t]=(z=s[t])!=null?z:{};s[t][v]=x}}}var A={};for(var B in r){var C=r[B];for(var D in C){var E,F,G=C[D],H=(E=q.tableNames[B])==null?void 0:(F=E.indexes)==null?void 0:F[D];if(H==null){var I;A[B]=(I=A[B])!=null?I:{};A[B][D]=G}}}return{toRemove:A,toUpdate:s}},ua=async function(p,q){var r=p.table(b("ReStoreIndexMetadata").indicesTableName);for(var s in q){var t=q[s];for(var u in t){var v=t[u],w={data:v,indexName:u,tableName:s};await r.put(b("ReStoreIndexMetadata").indexDataToValue(w))}}},va=async function(p,q){var r=p.table(b("ReStoreIndexMetadata").indicesTableName);for(var s in q){var t=q[s];for(var u in t){var v=t[u].key;await r.delete(v)}}},wa=function(p,q){return ta(p,q).then(async function(r){var s=r.toRemove,t=r.toUpdate;await ua(p,t);await va(p,s)})};ra(async function(p){await wa(p,g)},"readwrite")}return{clearCacheIfSupported:function(){var p=h;p instanceof Object&&p.clearCache!==void 0&&p.clearCache instanceof Function&&p.clearCache()},closeDb:function(){var p=h;p instanceof Object&&p.close!==void 0&&p.close()},getTableData:function(){return g},isTransactionActive:function(){return l},runInTransaction:ra,subscribeToCommit:function(p){return i.subscribeToCommit(p)},subscriptionManager:i,table:function(p){return ma(m,p,function(){var q=new Map(),r=pa(new Map()),s=r.entries,t=r.get,u=r.getKey,v=r.peekNextAutoIncrementId;return{entries:function(w,x,y){x===void 0&&(x="asc");return ia(s(h.createTransaction(),w,p,void 0,x,y),new(a("ReStoreTransactionLock"))())},get:function(w,x){x===void 0&&(x=new WeakMap());return t(h.createTransaction(),x,p,void 0,w)},index:function(w){return ma(q,w,function(){return{entries:function(x,y,z){y===void 0&&(y="asc");return ia(s(h.createTransaction(),x,p,w,y,z),new(a("ReStoreTransactionLock"))())},get:function(x,y){y===void 0&&(y=new WeakMap());return t(h.createTransaction(),y,p,w,x)},getKey:function(x){return u(h.createTransaction(),new WeakMap(),p,w,x)},subscribe:function(x,y){return i.subscribeIndex(p,w,x,o(y,g.tableNames[p].indexes[w]))}}})},peekNextAutoIncrementId:function(){return v(h.createTransaction(),new WeakMap(),p)},subscribe:function(w,x){return i.subscribeTable(p,w,o(x,g.tableNames[p].primaryKeyIds.length))}}})}}}na.TransactionClosedError=c;ea.default=na}),98);
__d("createReStoreEphemeralPersistence",["ReStorePersistence","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}function a(){var a=new Map();function c(b){return h(a,b,function(){return new Map()})}return{flush:function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:a.forEach(function(a,b){var e=c(b);a.forEach(function(a,b){a===d("ReStorePersistence").sentinelDeleted?e["delete"](b):e.set(b,a)})});case 1:case"end":return b.stop()}},null,this)},get:function(a,b,d){a=c(b);return a.get(d)},releaseLockIfNeeded:function(){return window.Promise.resolve()},waitForLock:function(){return window.Promise.resolve()}}}g["default"]=a}),98);
__d("LSMailboxMessagesRangeQueryDirection.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.before=a;f.after=c}),null);
__d("LSMessagingThreadTypeUtil.bs",["LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs","MWCMThreadTypes.bs","MessagingThreadType.bs","bs_caml"],(function(a,b,c,d,e,f){"use strict";function a(a){if(b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").group)||b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").tincanGroupDisappearing)||b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").secureMessageOverWaGroup)||b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").marketplace)||b("MWCMThreadTypes.bs").isAnyCMThread(a)||b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").room))return!0;else return!1}function c(a){if(b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").oneToOne)||b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").tincanOneToOne)||b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").carrierMessagingOneToOne)||b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").tincanOneToOneDisappearing)||b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").secureMessageOverWaOneToOne))return!0;else return!1}function d(a){if(b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").secureMessageOverWaOneToOne)||b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").secureMessageOverWaGroup))return!0;else return!1}function e(a){a=a.NAME;if(a==="Group")return b("MessagingThreadType.bs").group;else if(a==="User"||a==="Page")return b("MessagingThreadType.bs").oneToOne;else return b("MessagingThreadType.bs").tincanOneToOne}function g(a){return b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").messageRequestComposerBanner,a)}f.isGroup=a;f.isOneToOne=c;f.isSecure=d;f.ofThreadId=e;f.isMessageRequest=g}),null);
__d("MWV2ChatOpenTabForGroupCallback.bs",["LS.bs","LSDatabaseDeferred.bs","LSIssueMessagesRangeQuery","LSMailboxMessagesRangeQueryDirection.bs","LSMessagingThreadTypeUtil.bs","LSTransaction.bs","Promise","ReQL.bs","bs_caml_format","promiseDone","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=b("bs_caml_format").caml_int64_of_string(a);a=b("LSDatabaseDeferred.bs").db.then(function(a){return b("LSTransaction.bs").run(a,function(a){var d=b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableDescending(a.table("threads")),{hd:c,tl:0}));return d.then(function(d){if(d!==void 0)if(b("LSMessagingThreadTypeUtil.bs").isSecure(d.threadType)){b("recoverableViolation")("Preloading secure thread not implemented yet","messenger_web_product");return b("Promise").resolve(void 0)}else return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableDescending(a.table("messages_ranges_v2__generated")),{hd:c,tl:0})).then(function(d){if(d!==void 0&&d.minMessageId===d.maxMessageId)return b("LSIssueMessagesRangeQuery")(c,d.minTimestampMs,b("LSMailboxMessagesRangeQueryDirection.bs").before,b("LS.bs").make(a))});else return b("Promise").resolve(void 0)})},"readWrite")});b("promiseDone")(a,void 0,void 0)}f.call=a}),null);
__d("LSJSInMemoryStorage.bs",["ReStore","createReStoreEphemeralPersistence"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReStore")(b("createReStoreEphemeralPersistence")(),a)}f.make=a}),null);
__d("LSDatabaseType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,25],B=[0,26],C=[0,27],D=[0,28],E=[0,29],F=[0,30],G=[0,31],H=[0,32],I=[0,33],J=[0,34],K=[0,35],L=[0,36],M=[0,37],N=[0,38],O=[0,39],P=[0,40],Q=[0,41],R=[0,42],S=[0,43],T=[0,44],U=[0,45],V=[0,46],W=[0,47],X=[0,48],Y=[0,49],Z=[0,50],$=[0,51],aa=[0,52],ba=[0,53],ca=[0,54],da=[0,55],ea=[0,56],fa=[0,57],ga=[0,59],ha=[0,60],ia=[0,61],ja=[0,62],ka=[0,63],la=[0,64],ma=[0,65],na=[0,66],oa=[0,67],pa=[0,68],qa=[0,69],ra=[0,70],sa=[0,71],ta=[0,72],ua=[0,73],va=[0,74],wa=[0,75],xa=[0,76],ya=[0,77],za=[0,78],Aa=[0,79],Ba=[0,80],Ca=[0,81],Da=[0,82],Ea=[0,84],Fa=[0,85],Ga=[0,86],Ha=[0,87],Ia=[0,88],Ja=[0,89],Ka=[0,90],La=[0,91],Ma=[0,92],Na=[0,93],Oa=[0,94],Pa=[0,95],Qa=[0,96],Ra=[0,97],Sa=[0,98],Ta=[0,99],Ua=[0,100],Va=[0,101],Wa=[0,102],Xa=[0,103],Ya=[0,104],Za=[0,105],$a=[0,106],ab=[0,107],bb=[0,108],cb=[0,109],db=[0,110],eb=[0,111],fb=[0,112],gb=[0,113],hb=[0,114],ib=[0,115],jb=[0,116];f.test=a;f.mailbox=c;f.contact=d;f.appAlerts=e;f.core=b;f.stories=g;f.presence=h;f.ranking=i;f.experiment=j;f.search=k;f.securemailbox=l;f.inboxAds=m;f.sticker=n;f.omnistoreRevisionTest=o;f.frx=p;f.payments=q;f.settings=r;f.gif=s;f.arEffects=t;f.platformExtensionSdk=u;f.businessTab=v;f.composerMenus=w;f.experimentalContactPhoneNumber=x;f.forwardContents=y;f.typing=z;f.qp=A;f.inthreadbanner=B;f.logSampling=C;f.threadTheme=D;f.mediaSend=E;f.contactUpload=F;f.aloha=G;f.omnistoreSimpleTest=H;f.booking=I;f.oneTimeSyncTest=J;f.threadEmoji=K;f.universalLinks=L;f.counters=M;f.emptyTest=N;f.accountSettings=O;f.videoChatLink=P;f.zeroRating=Q;f.connectivity=R;f.switchAccountBadging=S;f.emergencyPoll=T;f.cowatch=U;f.switchAccountProfiles=V;f.$$location=W;f.syncWatchdog=X;f.bloks=Y;f.mediaEditing=Z;f.pushNotifications=$;f.switchAccountBadgingRealtime=aa;f.dasmDebug=ba;f.testTwo=ca;f.dataTrace=da;f.mediaSharing=ea;f.pluginExtensions=fa;f.localUserSettings=ga;f.groups=ha;f.dabl=ia;f.linkedGroups=ja;f.fxcal=ka;f.rooms=la;f.proactiveWarnings=ma;f.messagingAds=na;f.supportInbox=oa;f.coreClient=pa;f.threadCoPresence=qa;f.marketplace=ra;f.carrierMessaging=sa;f.notificationsClient=ta;f.cat=ua;f.composerSettings=va;f.groupThreadImage=wa;f.coplayMetadata=xa;f.searchUserGroups=ya;f.tutorial=za;f.paidAds=Aa;f.avatarsCoPresence=Ba;f.graphql=Ca;f.transcribe=Da;f.ixtServerTrigger=Ea;f.novi=Fa;f.testFramework=Ga;f.broker=Ha;f.openMessenger=Ia;f.anonymousCredentials=Ja;f.mlModel=Ka;f.localAuth=La;f.soundBite=Ma;f.encryptedBackups=Na;f.businessOrderManagement=Oa;f.e2eeMessagingMetadataMailbox=Pa;f.communitiesMailbox=Qa;f.mostLikelyToPollQuestions=Ra;f.breakoutSessions=Sa;f.messagingNotificationConfigs=Ta;f.sandboxSelector=Ua;f.gamesBotThread=Va;f.fakeMessageStreamInternalOnly=Wa;f.coPresence=Xa;f.communityExclusive=Ya;f.clientOnlySample=Za;f.urlBlackhole=$a;f.sharing=ab;f.encryptedBackupsVersioning=bb;f.rpPolls=cb;f.everythingTogether=db;f.immersiveModesSpaces=eb;f.inAppPurchaseKit=fb;f.decentralizedTypes=gb;f.armadilloDevice=hb;f.staticEntryPoint=ib;f.giphyCategory=jb}),null);
__d("LSMailboxInitialSyncCursor.bs",["CurrentLocale","LSSyncChannel.bs","gkx"],(function(a,b,c,d,e,f){"use strict";a=b("gkx")("1224637")?183:150;c=b("gkx")("1224637")?360:300;d=b("CurrentLocale").get();e={scale:1,preview_height:200,preview_width:a,preview_height_large:400,preview_width_large:c,full_height:200,snapshot_num_threads_per_page:15,locale:d};a={contents:b("LSSyncChannel.bs").mqtt};c={contents:0};d={contents:e};f.defaultSyncParams=e;f.syncChannel=a;f.lastSyncTimestampMs=c;f.syncParams=d}),null);
__d("LSSyncGroupsUtils.bs",["CurrentLocale","LSDict","LSJson","LSMailboxInitialSyncCursor.bs","LSSyncChannel.bs","bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";function a(a,b){return b.reduce(function(b,c){return b.then(function(b){return a.put(c)})},window.Promise.resolve(void 0))}c=b("LSJson").stringify(new(b("LSDict"))([["locale",b("CurrentLocale").get()]]));e={groupId:(d=b("bs_caml_int64")).zero,currentCursor:void 0,syncStatus:d.zero,syncParams:c,sendSyncParams:!0,minTimeToSyncTimestampMs:d.neg_one,canIgnoreTimestamp:!1,priority:d.zero,lastSyncRequestTimestampMs:d.zero,regionHint:void 0,lastSyncCompletedTimestampMs:void 0,dataTraceId:void 0,initTraceTimestampMs:void 0,syncChannel:b("LSSyncChannel.bs").mqtt};c=d.zero;b=d.of_float(b("LSMailboxInitialSyncCursor.bs").lastSyncTimestampMs.contents);c={taskQueueName:"",syncDatabaseId:d.zero,epochId:c,networkTaskIdentifier:void 0,lastSentTimestampMs:d.zero,failureCount:d.zero,lastSyncRequestTimestampMs:b,lastDelayedRequestTimestampMs:void 0};b={taskQueueName:"",syncDatabaseId:d.zero,epochId:void 0,networkTaskIdentifier:void 0,lastSentTimestampMs:d.zero,failureCount:d.zero,lastSyncRequestTimestampMs:d.zero,lastDelayedRequestTimestampMs:void 0};f.writeRows=a;f.defaultNetworkRequest=b;f.defaultSyncGroup=e;f.preloadedNetworkRequest=c}),null);
__d("MNetRankType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,11],n=[0,12],o=[0,13],p=[0,14],q=[0,15],r=[0,16],s=[0,17],t=[0,18],u=[0,19],v=[0,20],w=[0,21],x=[0,22],y=[0,23],z=[0,24],A=[0,26],B=[0,27],C=[0,28],D=[0,29],E=[0,30],F=[0,31],G=[0,32],H=[0,33],I=[0,34],J=[0,35],K=[0,36],L=[0,37],M=[0,38],N=[0,39],O=[0,40],P=[0,41],Q=[0,42],R=[0,43],S=[0,44],T=[0,45];f.inboxActiveNow=a;f.messengerUserSearch=c;f.montageUser=d;f.broadcastFlowTopContacts=e;f.broadcastFlowNeedyContacts=b;f.messengerGroupSearch=g;f.rtcTopContacts=h;f.pstnTopContacts=i;f.messengerNonContactSearch=j;f.messengerSearchBootstrap=k;f.activeBeeper=l;f.montageAndActiveNow=m;f.messengerPageSearch=n;f.messengerGameSearch=o;f.wwwNullstate=p;f.rtcGrowth=q;f.messengerOmnipickerNullstate=r;f.rtcSequentialTopContacts=s;f.messengerUserSearchNullstate=t;f.mliteDiodePromotion=u;f.messengerPendingRequest=v;f.messengerCloseConnection=w;f.messengerMontageSeenSheet=x;f.messengerOmnipickerKeypress=y;f.messengerNotifQpTargetingUpsellType=z;f.contactTabActiveNow=A;f.messengerUnivNullstateBlend=B;f.messengerInboxThreads=C;f.inboxActiveNowNoBoosting=D;f.broadcastFlowTopContactsFbShare=E;f.broadcastFlowTopContactsMessengerShare=F;f.broadcastFlowTopContactsExternalShare=G;f.messengerTrendingStickers=H;f.messengerBroadcastFlowTopThreads=I;f.messengerSends28d=J;f.messengerRoomInvite=K;f.messengerRoomInviteSearch=L;f.inboxActiveNowPrefetch=M;f.messengerBlendedKeypress=N;f.messengerBlendedNullstate=O;f.messengerCarrierMessaging=P;f.messengerRoomInviteGroup=Q;f.messengerInboxBirthdayItem=R;f.instagramDirectSearchNullstate=S;f.broadcastFlowTopContactsAndTopThreadFbShare=T}),null);
__d("LSDefaultSyncGroups.bs",["CurrentUser","LSDatabaseType.bs","LSMailboxInitialSyncCursor.bs","LSSyncGroupsUtils.bs","MNetRankType.bs","bs_caml_format","bs_caml_int64","bs_curry","cr:11269","qex"],(function(a,b,c,d,e,f){"use strict";c=b("qex")._("1549");d=c==null?!1:c;var g={mnet_rank_types:d?[b("MNetRankType.bs").messengerUserSearch,b("MNetRankType.bs").messengerUserSearchNullstate,b("MNetRankType.bs").inboxActiveNow,b("MNetRankType.bs").messengerOmnipickerNullstate].map(b("bs_caml_int64").to_int32):[]};function h(a){return[function(c){var d;return(c=b("LSSyncGroupsUtils.bs")).writeRows(a.table("network_requests"),[{taskQueueName:c.preloadedNetworkRequest.taskQueueName,syncDatabaseId:(d=b("LSDatabaseType.bs")).mailbox,epochId:c.preloadedNetworkRequest.epochId,networkTaskIdentifier:c.preloadedNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.preloadedNetworkRequest.lastSentTimestampMs,failureCount:c.preloadedNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.preloadedNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.preloadedNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.preloadedNetworkRequest.taskQueueName,syncDatabaseId:d.contact,epochId:c.preloadedNetworkRequest.epochId,networkTaskIdentifier:c.preloadedNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.preloadedNetworkRequest.lastSentTimestampMs,failureCount:c.preloadedNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.preloadedNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.preloadedNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:d.payments,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:d.threadTheme,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:d.sticker,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:d.settings,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs},{taskQueueName:c.defaultNetworkRequest.taskQueueName,syncDatabaseId:d.inthreadbanner,epochId:c.defaultNetworkRequest.epochId,networkTaskIdentifier:c.defaultNetworkRequest.networkTaskIdentifier,lastSentTimestampMs:c.defaultNetworkRequest.lastSentTimestampMs,failureCount:c.defaultNetworkRequest.failureCount,lastSyncRequestTimestampMs:c.defaultNetworkRequest.lastSyncRequestTimestampMs,lastDelayedRequestTimestampMs:c.defaultNetworkRequest.lastDelayedRequestTimestampMs}])},function(c){var d,e,f;return(c=b("LSSyncGroupsUtils.bs")).writeRows(a.table("sync_groups"),[{groupId:(d=b("LSDatabaseType.bs")).mailbox,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:JSON.stringify((e=b("LSMailboxInitialSyncCursor.bs")).syncParams.contents),sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:c.defaultSyncGroup.minTimeToSyncTimestampMs,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:(f=b("bs_caml_int64")).of_float(e.lastSyncTimestampMs.contents),regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:e.syncChannel.contents},{groupId:d.contact,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:c.defaultSyncGroup.minTimeToSyncTimestampMs,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:f.of_float(e.lastSyncTimestampMs.contents),regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:e.syncChannel.contents},{groupId:d.payments,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:[2328,1316134911],canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.threadTheme,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:f.neg_one,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.sticker,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:[2328,1316134911],canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.ranking,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:JSON.stringify(g),sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:[2328,1316134911],canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.settings,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:c.defaultSyncGroup.minTimeToSyncTimestampMs,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.inthreadbanner,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:f.neg_one,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel},{groupId:d.stories,currentCursor:c.defaultSyncGroup.currentCursor,syncStatus:c.defaultSyncGroup.syncStatus,syncParams:c.defaultSyncGroup.syncParams,sendSyncParams:c.defaultSyncGroup.sendSyncParams,minTimeToSyncTimestampMs:f.neg_one,canIgnoreTimestamp:c.defaultSyncGroup.canIgnoreTimestamp,priority:c.defaultSyncGroup.priority,lastSyncRequestTimestampMs:c.defaultSyncGroup.lastSyncRequestTimestampMs,regionHint:c.defaultSyncGroup.regionHint,lastSyncCompletedTimestampMs:c.defaultSyncGroup.lastSyncCompletedTimestampMs,dataTraceId:c.defaultSyncGroup.dataTraceId,initTraceTimestampMs:c.defaultSyncGroup.initTraceTimestampMs,syncChannel:c.defaultSyncGroup.syncChannel}])},function(c){return b("LSSyncGroupsUtils.bs").writeRows(a.table("_user_info"),[{id:b("bs_caml_int64").one,facebookUserId:b("bs_caml_format").caml_int64_of_string(b("CurrentUser").getID())}])},function(c){if(b("cr:11269")==null)return window.Promise.resolve(void 0);else return b("bs_curry")._1(b("cr:11269").seed,a)}]}function a(a){return h(a).reduce(function(a,c){return a.then(b("bs_curry").__1(c))},window.Promise.resolve(void 0))}f.syncRankingLimited=d;f.syncRankingParams=g;f.$LSE2EEMetadataSyncSyncGroups$requireCond=b("cr:11269");f.writeData=h;f.seedDb=a}),null);
__d("MWLSSchemaEphemeral.bs",["LSDefaultSyncGroups.bs","LSJSInMemoryStorage.bs","LSTransaction.bs","MPWLSDBCreateSchema.bs","Promise"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("Promise").resolve(b("LSJSInMemoryStorage.bs").make(b("MPWLSDBCreateSchema.bs").metadata)).then(function(a){return b("LSTransaction.bs").run(a,b("LSDefaultSyncGroups.bs").seedDb,"readWrite").then(function(b){return a})})}f.createDB=a}),null);